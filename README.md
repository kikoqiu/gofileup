# Go 手机临时文件上传助手

一个轻量、自托管的Web应用，旨在让您通过局域网，像使用即时通讯（IM）软件一样，轻松地将手机上的临时文件、图片和文本片段上传到您的电脑。

---

## ✨ 功能亮点

- **现代化的IM界面**: 采用聊天界面，直观易用。
- **多种上传方式**:
  - **文件上传**: 支持上传任意类型的文件。
  - **图片上传**: 专门的图片选择器，方便快速分享截图或照片。
  - **文本发送**: 文本框中输入的内容将被保存为`.txt`文件上传，文件名根据内容和时间智能生成。
- **实时进度与反馈**: 文件上传时显示实时进度条，成功后绿色高亮提示，失败则红色告警。
- **高并发上传**: 支持同时选择并上传多个文件，每个文件都有独立的进度显示。
- **安全可靠**:
  - **HTTPS/TLS加密**: 默认启用TLS，并能**自动生成自签名证书**，无需手动配置。
  - **用户认证**: 采用HTTP Basic Auth进行身份验证，保护您的数据安全。
  - **用户隔离**: 每个用户的文件都存储在自己独立的目录下。
- **智能管理**:
  - **自动配置**: 首次启动时自动生成`config.json`配置文件和`users.txt`用户文件。
  - **文件整理**: 文件自动按 `data/用户名/年-月-日/` 的结构存放。
  - **消息持久化**: 聊天记录保存在浏览器本地存储（LocalStorage）中，刷新页面不丢失。
  - **自动清理**: 自动清理超过30天的本地消息记录，并提供手动清空功能。
- **强大的文件操作**:
  - **文件撤回**: 对已上传成功的文件，可以从服务器上删除，并在本地同步移除记录。
  - **智能命名**: 文本消息将根据内容第一行自动生成有意义的文件名，如`[153005]这是一个重要的备忘.txt`。
- **纯粹与便携**:
  - **单文件部署**: 前端界面通过`embed`方式嵌入Go程序，整个应用就是一个**独立的可执行文件**，无任何外部依赖。
  - **跨平台**: Go语言编写，可轻松编译为Windows, macOS, Linux等多个平台的版本。

## 🚀 快速开始
### 1. 获取并运行
- **首次运行**:
  程序启动时会自动检测并创建所需文件。你将在控制台看到类似如下的输出：
  ```
  未找到用户文件 users.txt，正在创建默认用户 'admin'...
  =======================================================
  默认用户已创建:
    用户名: admin
    密  码: AbCd1234EfGh  <-- 这是一个随机生成的密码
  请妥善保管此密码！
  =======================================================
  未找到证书，正在生成新的自签名证书...
  服务器正在启动，监听地址: :8094
  ```

### 2. 在手机上使用
1.  **获取电脑IP**:
    - **Windows**: 打开命令提示符(cmd)，输入 `ipconfig`。
    - **macOS/Linux**: 打开终端，输入 `ifconfig` 或 `ip a`。
    找到你的局域网IP地址，例如 `192.168.1.10`。
2.  **手机访问**:
    打开手机浏览器，访问 `https://<你的电脑IP>:8094` (例如: `https://192.168.1.10:8094`)。
3.  **信任证书**:
    由于证书是自签名的，浏览器会提示“不安全”。请点击“高级”或“显示详情”，然后选择“继续前往”或“信任此站点”。
4.  **登录**:
    在弹出的认证窗口中，输入控制台打印的用户名（`admin`）和随机密码。
5.  **开始上传**:
    现在你可以像使用聊天软件一样，点击附件按钮选择文件/图片，或者在文本框输入文字后点击发送按钮。

## 🛠️ 构建可执行文件

项目提供了方便的构建脚本，用于生成独立的、可直接分发的可执行文件。


### 一键构建全平台版本
双击运行 `build.all.bat` (Windows)。
这会创建一个 `builds` 文件夹，并在其中生成适用于 Windows, Linux, macOS (Intel & Apple Silicon) 的所有版本。

## ⚙️ 配置说明

### `config.json`
程序首次启动时生成，可按需修改。
```json
{
  "bind": ":8094",        // 监听的地址和端口
  "tls": true,            // 是否启用HTTPS (true/false)
  "cert_file": "cert.pem",// 证书文件路径
  "key_file": "key.pem",  // 私钥文件路径
  "visit_log": "visit.log", // 访问日志文件名，留空则不记录
  "data_dir": "data",     // 上传文件的根目录
  "users_file": "users.txt" // 用户凭据文件
}
```

### `users.txt`
用于存储用户认证信息，格式为 `用户名:密码`，每行一个用户。
```
# 这是注释行，会被忽略
admin:AbCd1234EfGh
user2:another_strong_password
```
你可以手动添加更多用户，然后重启程序即可生效。

## 💻 技术栈

- **后端**: [Go](https://golang.org/) (`net/http`, `embed`)
- **前端**: 原生 JavaScript (ES6+), HTML5, CSS3

## 📜 许可证

本项目采用 [MIT](https://opensource.org/licenses/MIT) 许可证。