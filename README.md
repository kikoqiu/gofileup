# Go æ‰‹æœºä¸´æ—¶æ–‡ä»¶ä¸Šä¼ åŠ©æ‰‹

ä¸€ä¸ªè½»é‡ã€è‡ªæ‰˜ç®¡çš„Webåº”ç”¨ï¼Œæ—¨åœ¨è®©æ‚¨é€šè¿‡å±€åŸŸç½‘ï¼Œåƒä½¿ç”¨å³æ—¶é€šè®¯ï¼ˆIMï¼‰è½¯ä»¶ä¸€æ ·ï¼Œè½»æ¾åœ°å°†æ‰‹æœºä¸Šçš„ä¸´æ—¶æ–‡ä»¶ã€å›¾ç‰‡å’Œæ–‡æœ¬ç‰‡æ®µä¸Šä¼ åˆ°æ‚¨çš„ç”µè„‘ï¼Œå¹¶æ”¯æŒå¤šè®¾å¤‡é—´æ¶ˆæ¯åŒæ­¥ã€‚

---

## ç®€ä½“ä¸­æ–‡

### âœ¨ åŠŸèƒ½äº®ç‚¹

- **ç°ä»£åŒ–çš„IMç•Œé¢**: é‡‡ç”¨ç±»ä¼¼ä¸»æµIMçš„èŠå¤©ç•Œé¢ï¼Œç›´è§‚æ˜“ç”¨ã€‚
- **å¤šç§ä¸Šä¼ æ–¹å¼**:
  - **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒä¸Šä¼ ä»»æ„ç±»å‹çš„æ–‡ä»¶ã€‚
  - **å›¾ç‰‡ä¸Šä¼ **: ä¸“é—¨çš„å›¾ç‰‡é€‰æ‹©å™¨ï¼Œæ–¹ä¾¿å¿«é€Ÿåˆ†äº«æˆªå›¾æˆ–ç…§ç‰‡ã€‚
  - **æ–‡æœ¬å‘é€**: æ–‡æœ¬æ¡†ä¸­è¾“å…¥çš„å†…å®¹å°†è¢«ä¿å­˜ä¸º`.txt`æ–‡ä»¶ä¸Šä¼ ï¼Œæ–‡ä»¶åæ ¹æ®å†…å®¹å’Œæ—¶é—´æ™ºèƒ½ç”Ÿæˆã€‚
- **è·¨è®¾å¤‡åŒæ­¥**: åœ¨ä»»ä½•è®¾å¤‡ä¸Šä¸Šä¼ çš„æ–‡ä»¶ï¼Œéƒ½ä¼šå‡ºç°åœ¨å…¶ä»–è®¾å¤‡çš„èŠå¤©è®°å½•ä¸­ï¼ˆé€šè¿‡åˆ·æ–°ï¼‰ã€‚
- **å®æ—¶è¿›åº¦ä¸åé¦ˆ**: æ–‡ä»¶ä¸Šä¼ æ—¶æ˜¾ç¤ºå®æ—¶è¿›åº¦æ¡ï¼ŒæˆåŠŸåç»¿è‰²é«˜äº®æç¤ºã€‚
- **å®‰å…¨å¯é **:
  - **HTTPS/TLSåŠ å¯†**: é»˜è®¤å¯ç”¨TLSï¼Œå¹¶èƒ½**è‡ªåŠ¨ç”Ÿæˆè‡ªç­¾åè¯ä¹¦**ã€‚
  - **ç”¨æˆ·è®¤è¯**: é‡‡ç”¨HTTP Basic Authè¿›è¡Œèº«ä»½éªŒè¯ã€‚
  - **ç”¨æˆ·éš”ç¦»**: æ¯ä¸ªç”¨æˆ·çš„æ–‡ä»¶å’Œå†å²è®°å½•éƒ½å­˜å‚¨åœ¨è‡ªå·±ç‹¬ç«‹çš„ç›®å½•ä¸‹ã€‚
- **æ™ºèƒ½ç®¡ç†**:
  - **è‡ªåŠ¨é…ç½®**: é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆ`config.json`é…ç½®æ–‡ä»¶ã€`users.txt`ç”¨æˆ·æ–‡ä»¶ï¼Œä»¥åŠæœ¬`README.md`è¯´æ˜æ–‡ä»¶ã€‚
  - **æ–‡ä»¶æ•´ç†**: æ–‡ä»¶è‡ªåŠ¨æŒ‰ `data/ç”¨æˆ·å/å¹´-æœˆ-æ—¥/` çš„ç»“æ„å­˜æ”¾ã€‚
  - **æ¶ˆæ¯æŒä¹…åŒ–**: èŠå¤©è®°å½•ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œå¹¶ä¸æœåŠ¡å™¨7å¤©å†…çš„å†å²è®°å½•åŒæ­¥ã€‚
- **å¼ºå¤§çš„æ–‡ä»¶æ“ä½œ**:
  - **æ–‡ä»¶ä¸‹è½½ä¸æ’¤å›**: æ”¯æŒä¸‹è½½ä»»æ„è®¾å¤‡ä¸Šä¼ çš„æ–‡ä»¶ï¼Œæˆ–æ’¤å›è‡ªå·±ä¸Šä¼ çš„æ–‡ä»¶ã€‚
- **çº¯ç²¹ä¸ä¾¿æº**:
  - **å•æ–‡ä»¶éƒ¨ç½²**: å‰ç«¯ç•Œé¢å’Œè¯´æ˜æ–‡æ¡£é€šè¿‡`embed`æ–¹å¼åµŒå…¥Goç¨‹åºï¼Œæ•´ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ª**ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶**ã€‚
  - **è·¨å¹³å°**: Goè¯­è¨€ç¼–å†™ï¼Œå¯è½»æ¾ç¼–è¯‘ä¸ºWindows, macOS, Linuxç­‰å¤šä¸ªå¹³å°çš„ç‰ˆæœ¬ã€‚
  - **å›½é™…åŒ–(i18n)**: ç•Œé¢æ”¯æŒä¸­/è‹±æ–‡ï¼Œæ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨åˆ‡æ¢ã€‚

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### 1. ç¯å¢ƒå‡†å¤‡
- å®‰è£… [Go è¯­è¨€ç¯å¢ƒ](https://golang.org/dl/) (ç‰ˆæœ¬ >= 1.16)ã€‚

#### 2. è·å–å¹¶è¿è¡Œ
- **ä¸‹è½½æˆ–å…‹éš†ä»£ç **:
  ```bash
  git clone https://github.com/kikoqiu/gofileup.git
  cd gofileup
  ```
- **ç›´æ¥è¿è¡Œ**:
  ```bash
  go run .
  ```
- **é¦–æ¬¡è¿è¡Œ**:
  ç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»ºæ‰€éœ€æ–‡ä»¶ã€‚ä½ å°†åœ¨æ§åˆ¶å°çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¾“å‡ºï¼ˆæ—¥å¿—ä¸ºè‹±æ–‡ï¼‰ï¼š
  ```
  Config file 'config.json' not found, creating default...
  User file 'users.txt' not found, creating default user 'admin'...
  =======================================================
  Default user created:
    Username: admin
    Password: AbCd1234EfGh  <-- è¿™æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„å¯†ç 
  Please store this password securely!
  =======================================================
  README.md not found, generating one...
  Certificate not found, generating new self-signed certificate...
  Server starting, listening on :8094
  ```

#### 3. åœ¨æ‰‹æœºä¸Šä½¿ç”¨
1.  **è·å–ç”µè„‘IP**: åœ¨ç”µè„‘ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥ `ipconfig` (Windows) æˆ– `ifconfig` / `ip a` (macOS/Linux)ã€‚
2.  **æ‰‹æœºè®¿é—®**: æ‰“å¼€æ‰‹æœºæµè§ˆå™¨ï¼Œè®¿é—® `https://<ä½ çš„ç”µè„‘IP>:8094` (ä¾‹å¦‚: `https://192.168.1.10:8094`)ã€‚
3.  **ä¿¡ä»»è¯ä¹¦**: æµè§ˆå™¨ä¼šæç¤ºâ€œä¸å®‰å…¨â€ã€‚è¯·ç‚¹å‡»â€œé«˜çº§â€->â€œç»§ç»­å‰å¾€â€ã€‚
4.  **ç™»å½•**: è¾“å…¥æ§åˆ¶å°æ‰“å°çš„ç”¨æˆ·åï¼ˆ`admin`ï¼‰å’Œéšæœºå¯†ç ã€‚
5.  **å¼€å§‹ä½¿ç”¨**: ç‚¹å‡»åˆ·æ–°æŒ‰é’®åŒæ­¥å†å²æ¶ˆæ¯ï¼Œæˆ–å¼€å§‹ä¸Šä¼ æ–°æ–‡ä»¶ã€‚

### ğŸ› ï¸ æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶

é¡¹ç›®æä¾›äº†æ„å»ºè„šæœ¬ `build.all.bat` (Windows, å…¨å¹³å°)ã€‚åŒå‡»è¿è¡Œå³å¯ç”Ÿæˆç‹¬ç«‹çš„ã€å¯ç›´æ¥åˆ†å‘çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚

### âš™ï¸ é…ç½®è¯´æ˜

#### `config.json`
```json
{
  "bind": ":8094",        // ç›‘å¬çš„åœ°å€å’Œç«¯å£
  "tls": true,            // æ˜¯å¦å¯ç”¨HTTPS
  "cert_file": "cert.pem",// è¯ä¹¦æ–‡ä»¶è·¯å¾„
  "key_file": "key.pem",  // ç§é’¥æ–‡ä»¶è·¯å¾„
  "visit_log": "visit.log", // è®¿é—®æ—¥å¿—æ–‡ä»¶
  "data_dir": "data",     // ä¸Šä¼ æ–‡ä»¶çš„æ ¹ç›®å½•
  "users_file": "users.txt" // ç”¨æˆ·å‡­æ®æ–‡ä»¶
}
```

#### `users.txt`
æ ¼å¼: `ç”¨æˆ·å:å¯†ç `ï¼Œæ¯è¡Œä¸€ä¸ªã€‚
```
# è¿™æ˜¯æ³¨é‡Šè¡Œ
admin:AbCd1234EfGh
user2:another_strong_password
```

### ğŸ’» æŠ€æœ¯æ ˆ

- **åç«¯**: Go (`net/http`, `embed`)
- **å‰ç«¯**: åŸç”Ÿ JavaScript (ES6+), HTML5, CSS3

### ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT](https://opensource.org/licenses/MIT) è®¸å¯è¯ã€‚


---

## English

### âœ¨ Features

- **Modern IM Interface**: Intuitive and easy to use, resembling popular IM applications.
- **Multiple Upload Methods**:
  - **File Upload**: Supports any file type.
  - **Image Upload**: A dedicated image picker for quickly sharing screenshots or photos.
  - **Text Snippets**: Text entered in the input box is saved as a `.txt` file, with a filename intelligently generated from its content and timestamp.
- **Cross-Device Sync**: Files uploaded from any device will appear in the chat history of other devices after a refresh.
- **Real-time Feedback**: Live progress bars for file uploads with success/failure indicators.
- **Secure & Reliable**:
  - **HTTPS/TLS Encryption**: Enabled by default, with **auto-generated self-signed certificates**.
  - **User Authentication**: Uses HTTP Basic Auth to protect your data.
  - **User Isolation**: Each user's files and history are stored in separate, private directories.
- **Intelligent Management**:
  - **Auto-Configuration**: Automatically generates `config.json`, `users.txt`, and this `README.md` file on first launch.
  - **File Organization**: Files are automatically stored in a `data/username/YYYY-MM-DD/` structure.
  - **Message Persistence**: Chat history is saved in the browser's LocalStorage and synchronized with the server's 7-day history.
- **Powerful File Operations**:
  - **Download & Withdraw**: Download any file from the history, or withdraw (delete from server) files you've uploaded.
- **Pure & Portable**:
  - **Single-File Deployment**: The frontend UI and this README are embedded into the Go program, resulting in a **single, dependency-free executable**.
  - **Cross-Platform**: Written in Go, easily compiled for Windows, macOS, Linux, etc.
  - **Internationalization (i18n)**: The interface supports English and Chinese, automatically selected based on browser language.

### ğŸš€ Quick Start

#### 1. Prerequisites
- Install the [Go Environment](https://golang.org/dl/) (version >= 1.16).

#### 2. Get and Run
- **Download or clone the code**:
  ```bash
  git clone https://github.com/kikoqiu/gofileup.git
  cd gofileup
  ```
- **Run directly**:
  ```bash
  go run .
  ```
- **On First Run**:
  The program will automatically create necessary files. You will see output similar to this in your console:
  ```
  Config file 'config.json' not found, creating default...
  User file 'users.txt' not found, creating default user 'admin'...
  =======================================================
  Default user created:
    Username: admin
    Password: AbCd1234EfGh  <-- This is a randomly generated password
  Please store this password securely!
  =======================================================
  README.md not found, generating one...
  Certificate not found, generating new self-signed certificate...
  Server starting, listening on :8094
  ```

#### 3. Use on Your Phone
1.  **Get your Computer's IP**: Open a terminal/command prompt and type `ipconfig` (Windows) or `ifconfig` / `ip a` (macOS/Linux).
2.  **Access from Phone**: Open your phone's browser and navigate to `https://<YOUR_COMPUTER_IP>:8094` (e.g., `https://192.168.1.10:8094`).
3.  **Trust the Certificate**: Your browser will show a security warning. Click "Advanced" -> "Proceed to..." to accept the self-signed certificate.
4.  **Log In**: Use the username (`admin`) and random password printed in the console.
5.  **Start Transferring**: Click the refresh button to sync history, or start uploading new files.

### ğŸ› ï¸ Build

The project includes build scripts `build.all.bat` (for all platforms, on Windows). Simply double-click to run them and generate standalone executables.

### âš™ï¸ Configuration

#### `config.json`
```json
{
  "bind": ":8094",        // Listen address and port
  "tls": true,            // Enable HTTPS (true/false)
  "cert_file": "cert.pem",// Certificate file path
  "key_file": "key.pem",  // Private key file path
  "visit_log": "visit.log", // Access log file
  "data_dir": "data",     // Root directory for uploaded files
  "users_file": "users.txt" // User credentials file
}
```

#### `users.txt`
Format: `username:password`, one per line.
```
# This is a comment line
admin:AbCd1234EfGh
user2:another_strong_password
```

### ğŸ’» Tech Stack

- **Backend**: Go (`net/http`, `embed`)
- **Frontend**: Vanilla JavaScript (ES6+), HTML5, CSS3

### ğŸ“œ License

This project is licensed under the [MIT License](https://opensource.org/licenses/MIT).
```